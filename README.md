# MinerU PDF 解析客户端

一个基于 **PySide6** 构建的 MinerU 本地桌面客户端，提供批量上传、云端解析、结果下载与历史任务管理等功能，旨在让用户以可视化方式充分利用 MinerU 官方 API 的能力。

---

## ✨ 功能概览

- **图形化批量处理**：通过拖拽或文件选择器快速导入本地 PDF，并支持批量上传。
- **云端解析调度**：自动对接 MinerU API，执行上传、轮询解析状态、下载结果和整理输出。
- **任务恢复能力**：
  - 程序意外关闭后，可从历史记录中重新启动轮询任务；
  - 已完成的批次可再次下载结果；
  - 对于失败批次，提供重新上传文件的提示信息。
- **运行状态可视化**：实时展示上传/解析进度、任务统计、轮询日志和历史记录。
- **配置持久化**：保存 API Key、输出目录和解析选项，支持加密存储 API Key。
- **日志记录**：自动滚动保存运行日志，便于排查问题。

---

## 🛠️ 环境准备

1. **Python 版本**：建议 Python 3.10 及以上。
2. **安装依赖**：

   ```bash
   pip install -r requirements.txt
   ```

   > 本项目核心依赖包含：
   > - PySide6
   > - requests
   > - pydantic
   > - cryptography

3. **配置 MinerU API**：
   - 在应用首次启动时设置 API Key。
   - 若本地已有自定义 `config.json` / `key.key`，可直接放置于项目根目录。
   - 项目提供 `docs/API_DOC.md`，记录 MinerU API 的使用说明与字段含义。

---

## 🚀 启动方式

```bash
python main.py
```

启动后会加载主窗口，按照界面指引即可完成文件导入、选项配置以及任务启动。

---

## 📁 目录结构

| 目录 / 文件            | 说明                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `main.py`              | 程序入口，负责启动 Qt 应用。                                 |
| `app.py`               | 应用初始化逻辑，挂载主题与主窗口。                           |
| `core/`                | 核心数据结构、配置模型与加密配置管理器。                     |
| `services/`            | 与 API、日志、任务调度相关的服务层模块。                     |
| `ui/`                  | 主界面、主题样式与 UI 相关定义。                             |
| `widgets/`             | 自定义控件：文件队列、日志视图、状态摘要、任务历史等。       |
| `tests/`               | 配置组件的单元测试示例。                                     |
| `logs/`                | 运行期间自动生成的日志。                                     |
| `config.json` / `key.key` | 用户配置与密钥文件，自动生成，可加密保存 API Key。         |

---

## 🔄 主要工作流程

1. **添加文件**：拖拽或点击“添加文件”，文件会显示在“文件选择”区。
2. **设置解析参数**：在“设置”区配置语言、OCR、重试等选项。
3. **选择输出目录**：确保该目录存在；程序会在下方按照 `批次/文件名` 生成结果。
4. **启动解析**：点击“开始解析”，应用会自动执行：
   - 获取上传 URL
   - 上传 PDF
   - 轮询解析结果
   - 下载并解压结果 ZIP
5. **查看进度**：
   - “任务历史”支持重新轮询、重新下载以及重新上传提示。
   - “日志”记录详细过程，可导出分析。

---

## 🤝 贡献指南

欢迎通过以下方式参与项目：

1. Fork 仓库并创建功能分支。
2. 提交 PR 时请附带必要的测试与文档更新。
3. 若有重大需求或问题，欢迎先通过 Issue 讨论。

---

## 📜 许可证

项目为内部学习与演示用途，发布前请根据实际情况补充许可证信息。如需对外发布，请确认所有依赖和 API 使用条款。

---

如有疑问或建议，欢迎提交 Issue 或直接联系维护者。祝使用愉快！🙏
